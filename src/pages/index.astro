---
import Layout from '../layouts/Layout.astro';
---

<Layout>
	<div class="page" x-data="splitScreenBlog()" x-init="init()">
		<div class="background-effect" aria-hidden="true"></div>

		<div class="window-container">
			<div class="window">
				<div class="window-glow" aria-hidden="true"></div>

				<div class="title-bar">
					<div class="window-controls">
						<span class="window-dot"></span>
						<span class="window-dot"></span>
						<span class="window-dot"></span>
					</div>
					<div class="title-text">nwalker.me</div>
					<div class="title-spacer"></div>
				</div>

				<div class="window-body">
					<nav class="side-nav">
						<div class="brand">
							<h1>Walker</h1>
							<p>Developer...</p>
						</div>

						<ul class="nav-list">
							<template x-for="item in navItems" :key="item.id">
								<li>
									<button
										type="button"
										class="nav-button"
										:class="{ 'is-active': activeSection === item.id }"
										@click="navigate(item.id)"
									>
										<span class="nav-active" x-show="activeSection === item.id" x-transition></span>
										<span class="nav-icon" x-html="item.icon" aria-hidden="true"></span>
										<span class="nav-label" x-text="item.label"></span>
									</button>
								</li>
							</template>
						</ul>

						<div class="nav-footer">
							<a href="https://x.com/yixiannanmo" class="footer-link" target="_blank" rel="noreferrer">X</a>
							<a href="https://github.com/wawayes" class="footer-link" target="_blank" rel="noreferrer">GitHub</a>
							<a href="mailto:nextwalkerovo@gmail.com" class="footer-link">Email</a>
						</div>
					</nav>

					<div class="content" x-ref="content" @scroll="handleScroll">
						<div class="content-inner">
							<section id="profile" class="section">
								<div class="section-header">
									<h2>Profile</h2>
									<p>A bit more about me and what I do</p>
								</div>
								<div class="section-body">
									<div class="profile-logo">
										<img
											src="https://imagedelivery.net/Q7rmztdujLnuBdJKXVK08A/7460e660-a74c-49df-a13e-570ed94d8200/logocard"
											srcset="https://imagedelivery.net/Q7rmztdujLnuBdJKXVK08A/7460e660-a74c-49df-a13e-570ed94d8200/logocard 1x, https://imagedelivery.net/Q7rmztdujLnuBdJKXVK08A/7460e660-a74c-49df-a13e-570ed94d8200/logocard2x 2x"
											alt="Walker logo"
											loading="lazy"
											width="96"
											height="96"
										/>
									</div>
									<p>
										Hi, I'm Walker. I was born in 2002. To be honest, I don't have a
										field that I'm particularly good at yet, but I want to become a
										really capable developer.
									</p>
									<p class="profile-quote">
										Share without expecting reward; sharing itself is fulfillment.
										<span lang="zh-CN">施而不望其报，分享及是圆满。</span>
									</p>

									<div class="subsection">
										<h3>Get in touch</h3>
										<p>
											I'm always open to interesting conversations and collaboration
											opportunities.
										</p>
										<a class="cta" href="mailto:nextwalkerovo@gmail.com">
											<span class="cta-icon" x-html="icons.mail" aria-hidden="true"></span>
											Send me an email
										</a>
									</div>
								</div>
							</section>

							<section id="projects" class="section">
								<div class="section-header">
									<h2>Projects</h2>
									<p>Open-source projects and side projects I'm working on</p>
								</div>
								<div class="cards grid">
									<a class="card project-card" href="https://faketextmessager.com" target="_blank" rel="noreferrer">
										<div class="project-header">
											<img
												class="project-logo"
												src="https://imagedelivery.net/Q7rmztdujLnuBdJKXVK08A/1b38e0fb-bd7a-442c-924f-b3ea2459b700/logocard"
												srcset="https://imagedelivery.net/Q7rmztdujLnuBdJKXVK08A/1b38e0fb-bd7a-442c-924f-b3ea2459b700/logocard 1x, https://imagedelivery.net/Q7rmztdujLnuBdJKXVK08A/1b38e0fb-bd7a-442c-924f-b3ea2459b700/logocard2x 2x"
												alt="faketextmessager logo"
												loading="lazy"
												width="96"
												height="96"
											/>
											<div>
												<h3>faketextmessager.com</h3>
												<p>Create conversations that never happened — and make your life a little more chaotic.</p>
											</div>
										</div>
										<div class="card-links">
											<span class="card-link">
												<span class="link-icon" x-html="icons.external" aria-hidden="true"></span>
												Visit
											</span>
										</div>
									</a>
								</div>
							</section>
						</div>
					</div>
				</div>
			</div>

			<div class="pedestal" aria-hidden="true"></div>
		</div>
	</div>
</Layout>

<script is:inline>
	function splitScreenBlog() {
		return {
			activeSection: 'profile',
			navItems: [
				{ id: 'profile', label: 'Profile', icon: iconUser() },
				{ id: 'projects', label: 'Projects', icon: iconBriefcase() },
			],
			icons: {
				mail: iconMail(),
				external: iconExternalLink(),
			},
			init() {
				this.handleScroll();
			},
			navigate(section) {
				const container = this.$refs.content;
				const element = document.getElementById(section);
				if (!container || !element) return;
				const offset = element.offsetTop - 60;
				container.scrollTo({ top: offset, behavior: 'smooth' });
			},
			handleScroll() {
				const container = this.$refs.content;
				if (!container) return;
				const scrollPosition = container.scrollTop + 200;
				for (const section of ['profile', 'projects']) {
					const element = document.getElementById(section);
					if (!element) continue;
					const top = element.offsetTop;
					const bottom = top + element.offsetHeight;
					if (scrollPosition >= top && scrollPosition < bottom) {
						this.activeSection = section;
						break;
					}
				}
			},
		};
	}

	function iconBase(path, viewBox = '0 0 24 24') {
		return `<svg xmlns="http://www.w3.org/2000/svg" viewBox="${viewBox}" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">${path}</svg>`;
	}

	function iconMail() {
		return iconBase('<rect x="3" y="5" width="18" height="14" rx="2"></rect><path d="m3 7 9 6 9-6"></path>');
	}

	function iconExternalLink() {
		return iconBase('<path d="M14 3h7v7"></path><path d="M10 14 21 3"></path><path d="M21 14v7h-7"></path><path d="M3 10v11h11"></path>');
	}

	function iconUser() {
		return iconBase('<path d="M20 21a8 8 0 0 0-16 0"></path><circle cx="12" cy="7" r="4"></circle>');
	}

	function iconBriefcase() {
		return iconBase('<rect x="2" y="7" width="20" height="14" rx="2"></rect><path d="M16 7V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"></path><path d="M2 13h20"></path>');
	}
</script>

<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

<style is:global>
	:root {
		color-scheme: light;
		--bg: #050505;
		--panel: #ffffff;
		--ink: #0f172a;
		--muted: #64748b;
		--muted-strong: #475569;
		--border: rgba(148, 163, 184, 0.4);
		--chip: #f1f5f9;
		--chip-text: #475569;
		--accent: #0f172a;
		--accent-soft: #e2e8f0;
		--shadow: rgba(0, 0, 0, 0.55);
	}

	*,
	*::before,
	*::after {
		box-sizing: border-box;
	}

	body {
		margin: 0;
		background: var(--bg);
		color: var(--ink);
	}

	.page {
		min-height: 100vh;
		position: relative;
	}

	.background-effect {
		position: fixed;
		inset: 0;
		background: radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.16), transparent 45%),
			radial-gradient(circle at 80% 10%, rgba(168, 85, 247, 0.14), transparent 40%),
			linear-gradient(120deg, #050505, #0b0f1a 50%, #050505);
		pointer-events: none;
		z-index: 0;
	}

	.window-container {
		position: relative;
		z-index: 1;
		min-height: 100vh;
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 24px;
	}

	.window {
		position: relative;
		width: min(1200px, 100%);
		background: var(--panel);
		border-radius: 24px;
		overflow: hidden;
		border: 1px solid rgba(255, 255, 255, 0.1);
		box-shadow:
			0 0 0 1px rgba(255, 255, 255, 0.1),
			0 50px 100px -20px rgba(0, 0, 0, 0.8),
			0 30px 60px -30px rgba(0, 0, 0, 0.6),
			0 0 300px rgba(59, 130, 246, 0.15),
			0 0 200px rgba(168, 85, 247, 0.12);
		animation: window-rise 1s ease forwards;
	}

	@keyframes window-rise {
		from {
			opacity: 0;
			transform: translateY(20px) scale(0.96);
		}
		to {
			opacity: 1;
			transform: translateY(0) scale(1);
		}
	}

	.window-glow {
		position: absolute;
		inset: 0;
		border-radius: 24px;
		box-shadow:
			inset 0 0 100px rgba(59, 130, 246, 0.12),
			inset 0 0 60px rgba(168, 85, 247, 0.1);
		pointer-events: none;
	}

	.title-bar {
		position: relative;
		z-index: 1;
		display: flex;
		align-items: center;
		gap: 12px;
		padding: 14px 20px;
		background: #f8fafc;
		border-bottom: 1px solid var(--border);
	}

	.window-controls {
		display: flex;
		gap: 8px;
	}

	.window-dot {
		width: 12px;
		height: 12px;
		border-radius: 999px;
		background: #cbd5f5;
		display: inline-block;
		transition: background 0.2s ease;
	}

	.window-dot:nth-child(1):hover {
		background: #f87171;
	}
	.window-dot:nth-child(2):hover {
		background: #facc15;
	}
	.window-dot:nth-child(3):hover {
		background: #4ade80;
	}

	.title-text {
		flex: 1;
		text-align: center;
		font-size: 14px;
		color: #94a3b8;
		font-weight: 600;
		letter-spacing: 0.02em;
	}

	.title-spacer {
		width: 72px;
	}

	.window-body {
		position: relative;
		z-index: 1;
		display: flex;
		height: min(70vh, 900px);
		min-height: 620px;
	}

	.side-nav {
		width: 260px;
		background: #ffffff;
		border-right: 1px solid var(--border);
		padding: 28px 24px;
		display: flex;
		flex-direction: column;
		gap: 24px;
		overflow-y: auto;
	}

	.brand h1 {
		margin: 0 0 4px;
		font-size: 20px;
		font-weight: 700;
		color: var(--ink);
	}

	.brand p {
		margin: 0;
		font-size: 14px;
		color: var(--muted);
	}

	.nav-list {
		list-style: none;
		margin: 0;
		padding: 0;
		display: flex;
		flex-direction: column;
		gap: 6px;
		flex: 1;
	}

	.nav-button {
		position: relative;
		width: 100%;
		border: none;
		background: none;
		padding: 10px 12px;
		border-radius: 12px;
		display: flex;
		align-items: center;
		gap: 12px;
		font-size: 15px;
		color: var(--muted-strong);
		cursor: pointer;
		transition: color 0.2s ease;
	}

	.nav-button:hover {
		color: var(--ink);
	}

	.nav-button.is-active {
		color: var(--ink);
		font-weight: 600;
	}

	.nav-active {
		position: absolute;
		inset: 0;
		background: var(--accent-soft);
		border-radius: 12px;
		z-index: 0;
	}

	.nav-icon,
	.nav-label {
		position: relative;
		z-index: 1;
	}

	.nav-icon svg {
		width: 18px;
		height: 18px;
	}

	.nav-button.is-active .nav-icon {
		color: #334155;
	}

	.nav-footer {
		border-top: 1px solid var(--border);
		padding-top: 18px;
		display: flex;
		flex-direction: column;
		gap: 6px;
	}

	.footer-link {
		text-decoration: none;
		color: var(--muted);
		font-size: 14px;
		padding: 8px 10px;
		border-radius: 10px;
		transition: color 0.2s ease, background 0.2s ease;
	}

	.footer-link:hover {
		color: var(--ink);
		background: #f8fafc;
	}

	.content {
		flex: 1;
		overflow-y: auto;
		scroll-behavior: smooth;
		background: #ffffff;
	}

	.content-inner {
		padding: 48px;
		max-width: 820px;
	}

	.section {
		padding: 48px 0;
	}

	.section + .section {
		border-top: 1px solid rgba(226, 232, 240, 0.6);
	}

	.section-header h2 {
		margin: 0 0 6px;
		font-size: 36px;
		letter-spacing: -0.02em;
	}

	.section-header p {
		margin: 0 0 24px;
		color: var(--muted);
		font-size: 16px;
	}

	.section-body {
		display: flex;
		flex-direction: column;
		gap: 16px;
		color: var(--muted-strong);
		line-height: 1.7;
	}

	.profile-quote {
		font-style: italic;
		color: var(--muted);
		display: flex;
		flex-direction: column;
		gap: 6px;
	}

	.profile-quote span {
		font-style: normal;
		color: var(--muted-strong);
	}

	.profile-logo {
		width: 96px;
		height: 96px;
		border-radius: 20px;
		overflow: hidden;
		box-shadow: 0 14px 30px rgba(15, 23, 42, 0.12);
		background: #fff;
	}

	.profile-logo img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		display: block;
	}

	.subsection {
		padding-top: 24px;
	}

	.subsection h3 {
		margin: 0 0 14px;
		font-size: 18px;
		color: var(--ink);
	}

	.chip-group,
	.tag-group {
		display: flex;
		flex-wrap: wrap;
		gap: 8px;
	}

	.chip {
		padding: 8px 12px;
		background: var(--chip);
		color: var(--chip-text);
		border-radius: 12px;
		font-size: 13px;
		font-weight: 600;
	}

	.cta {
		display: inline-flex;
		align-items: center;
		gap: 10px;
		padding: 12px 18px;
		background: var(--accent);
		color: #fff;
		border-radius: 12px;
		text-decoration: none;
		font-weight: 600;
		box-shadow: 0 8px 20px rgba(15, 23, 42, 0.18);
		transition: transform 0.2s ease, box-shadow 0.2s ease;
	}

	.cta:hover {
		transform: translateY(-1px);
		box-shadow: 0 12px 24px rgba(15, 23, 42, 0.25);
	}

	.cta-icon svg {
		width: 16px;
		height: 16px;
	}

	.cards {
		display: flex;
		flex-direction: column;
		gap: 14px;
	}

	.cards.grid {
		display: grid;
		grid-template-columns: repeat(2, minmax(0, 1fr));
		gap: 16px;
	}

	.card {
		background: rgba(248, 250, 252, 0.8);
		border: 1px solid rgba(226, 232, 240, 0.7);
		border-radius: 16px;
		padding: 18px;
		text-decoration: none;
		color: inherit;
		transition: transform 0.2s ease, box-shadow 0.2s ease, border 0.2s ease;
	}

	.card:hover {
		border-color: rgba(148, 163, 184, 0.8);
		box-shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
		transform: translateY(-2px);
	}

	.card-meta {
		display: flex;
		gap: 16px;
		font-size: 12px;
		color: var(--muted);
		margin-bottom: 12px;
	}

	.meta-item {
		display: inline-flex;
		align-items: center;
		gap: 6px;
	}

	.meta-icon svg {
		width: 14px;
		height: 14px;
	}

	.card-body {
		display: flex;
		gap: 18px;
		justify-content: space-between;
		align-items: flex-start;
	}

	.card h3 {
		margin: 0 0 8px;
		font-size: 18px;
	}

	.card p {
		margin: 0 0 12px;
		color: var(--muted-strong);
		line-height: 1.6;
	}

	.tag {
		background: var(--chip);
		color: var(--chip-text);
		padding: 6px 10px;
		border-radius: 10px;
		font-size: 12px;
		font-weight: 600;
	}

	.card-arrow svg {
		width: 20px;
		height: 20px;
		color: #94a3b8;
	}

	.post-card:hover .card-arrow {
		transform: translate(2px, -2px);
		color: #64748b;
		transition: transform 0.2s ease, color 0.2s ease;
	}

	.card-links {
		display: flex;
		gap: 16px;
		font-size: 14px;
		margin-top: 12px;
	}

	.project-header {
		display: flex;
		gap: 16px;
		align-items: center;
		margin-bottom: 12px;
	}

	.project-logo {
		width: 72px;
		height: 72px;
		border-radius: 16px;
		background: #fff;
		box-shadow: 0 10px 24px rgba(15, 23, 42, 0.12);
		object-fit: cover;
	}

	.card-links a {
		display: inline-flex;
		align-items: center;
		gap: 6px;
		color: var(--muted-strong);
		text-decoration: none;
	}

	.card-links a:hover,
	.card-link:hover {
		color: var(--ink);
	}

	.card-link {
		display: inline-flex;
		align-items: center;
		gap: 6px;
		color: var(--muted-strong);
	}

	.link-icon svg {
		width: 15px;
		height: 15px;
	}

	.pedestal {
		position: absolute;
		bottom: 5%;
		left: 50%;
		transform: translateX(-50%);
		width: 70%;
		height: 48px;
		background: radial-gradient(ellipse 100% 100% at 50% 50%, rgba(0, 0, 0, 0.6) 0%, transparent 70%);
		filter: blur(30px);
		z-index: -1;
		animation: pedestal-fade 1.2s ease 0.3s forwards;
		opacity: 0;
	}

	@keyframes pedestal-fade {
		from {
			opacity: 0;
			transform: translateX(-50%) scale(0.8);
		}
		to {
			opacity: 1;
			transform: translateX(-50%) scale(1);
		}
	}

	@media (max-width: 980px) {
		.window-body {
			flex-direction: column;
			height: auto;
			min-height: auto;
			max-height: none;
		}

		.side-nav {
			width: 100%;
			border-right: none;
			border-bottom: 1px solid var(--border);
		}

		.content-inner {
			padding: 36px;
		}

		.cards.grid {
			grid-template-columns: 1fr;
		}
	}

	@media (max-width: 640px) {
		.window-container {
			padding: 16px;
		}

		.content-inner {
			padding: 28px;
		}

		.section-header h2 {
			font-size: 30px;
		}

		.card-body {
			flex-direction: column;
		}
	}
</style>
